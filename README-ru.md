## Что такое NBIN

NBIN - это формат сериализации данных, цель которого - упростить создание и хранение байт-кода произвольных языков программирования. Для этого в нём есть специальные типы данных, а так же своя структура бинарного файла

NBIN имеет свой формат двоичной записи, который в общих чертах можно описать так:
```bnf
<i8>        ::= 00h <byte>{1}
<i16>       ::= 01h <byte>{2}
<i32>       ::= 02h <byte>{4}
<i64>       ::= 03h <byte>{8}
<u8>        ::= 05h <byte>{1}
<u16>       ::= 06h <byte>{2}
<u32>       ::= 07h <byte>{4}
<u64>       ::= 09h <byte>{8}
<float>     ::= 10h <byte>{4}
<bool>      ::= 11h <byte>
<str>       ::= 12h <lenght> <byte>+
<null>      ::= 13h
<list>      ::= 14h <lenght> <exp>+
<block>     ::= 15h <lenght> <command>+
<command>   ::= 16h <lenght> <byte>+ <lenght> <exp>+


/* unsigned int */
<lenght> ::= <byte>{4}
```

> То, что записанно в "{ ... }" - число повторений

Каждая версия NBIN определяет свою спецификацию, например для текущего NBIN (NBIN 1) используется следующая спецификация:
1. Поддерживаемые типы данных:
    * i8 - 1 знаковый байт
    * i16 - 2 знаковых байта
    * i32 - 4 знаковых байта
    * i64 - 8 знаковых байта
    * u8 - 1 беззнаковый байт
    * u16 - 2 беззнаковых байта
    * u32 - 4 беззнаковых байта
    * u64 - 8 беззнаковых байта
    * str - строка в кодировке UNICODE
    * bool - логический тип
    * float - 32-х битное дробное число
    * command - команда
    * block - блок с командами
    * list - не типизорованный список
    * null - отсутствие значения
2. Длинна любой коллекции NBIN - это 32-х битное беззнаковое число
3. В бинарном файле может быть записан любой объект NBIN (не обязательно, чтобы всё было обёрнуто в блок)
4. NBIN старается поддерживать как можно большее кол-во типов
5. Типы NBIN должны удовлетворять потребностям, как низкоуровневому программированию, так и высокоуровневому


## Библиотека NBIN

Тут есть две функции:
1. `load` - принемает на вход байты в формате NBIN и возвращает Python объект
1. `dump` - принемает на вход Python объект и возвращает байты в формате NBIN

В общем, две эти функции занимаются конвертацией объектов

Пример использования:
```python
from NBIN.nbin import *


# Пример абстрактного синтаксического дерева на каком-то языке программирования
code = [
    Command('PRINT', ['Hello world!']),
    [
        'FUNC',
        Block([
            Command('SET', ['a', 14]),
            Command('SET', ['b', 2]),
            Command('SUM', ['a', 'b']),
        ]),
    ],
    Command('CALL', ['FUNC'])
]


# Запись в файл
with open('test.bin', 'wb') as file:
    result = dump(code)
    file.write()

# Чтение из файла
with open('test.bin', 'rb') as file:
    result = load( file.write() )

```


## Типы данных NBIN в Python

NBIN портирует в Python следующие типы:
1. `INT` - тип данных, для более тонкой настройки целочисленного типа
2. `Command` - тип команды
3. `Block` - тип, описывающий блок


### INT

Если вы ходите создать целое число размером в 1 байт, и при этом чтобы оно могло иметь знак, то сделайте так:
```python
number = INT('i8', 52)
```

`i8` здесь - это тип данных NBIN.
Весь список этих типов хранится в константе `TYPES_INT`, а в виде аннотации - `LITERAL_TYPES_INT`.
При этом вам нужно соблюдать разрешимые диапозоны для каждого из типов, их можно взять из константы `RANGES_TYPES_INT`.


### Command

`Command` позволяет определить вашу переменную, с её именем и параметрами.

Пример использования:
```python
cmd = Command('echo', ['Hello world!'])
```

Здесь: `name` (в примере он равен `echo`) - первый параметр `Command`, а параметры предаются во всторой параметр `Command` в виде списка, и могут иметь любой тип.


### Block

`Block` позволяет объединять список команд в один блок.

Пример использования:
```python
func = Block([
    Command('PRINT', ['Hello!']),
    Command('EXIT'),
])
```

**В него можно передавать, только список команд!**
